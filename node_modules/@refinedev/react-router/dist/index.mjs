import y from"react";import{matchResourceFromRoute as k,ResourceContext as A}from"@refinedev/core";import{useCallback as R,useContext as E}from"react";import P from"qs";import{useNavigate as b,useLocation as v,Link as I,matchPath as S,useParams as F}from"react-router";var h=e=>{if(typeof e>"u")return e;let t=Number(e);return`${t}`===e?t:e};var x={addQueryPrefix:!0,skipNulls:!0,arrayFormat:"indices",encode:!1,encodeValuesOnly:!0},D={go:()=>{let{search:e,hash:t}=v(),n=b();return R(({to:s,type:r,query:o,hash:a,options:{keepQuery:c,keepHash:f}={}})=>{let u={...c&&e&&P.parse(e,{ignoreQueryPrefix:!0}),...o};u.to&&(u.to=encodeURIComponent(`${u.to}`));let p=Object.keys(u).length>0,m=`#${(a||f&&t||"").replace(/^#/,"")}`,d=m.length>1,C=`${s||""}${p?P.stringify(u,x):""}${d?m:""}`;if(r==="path")return C;n(C,{replace:r==="replace"})},[t,e,n])},back:()=>{let e=b();return R(()=>{e(-1)},[e])},parse:()=>{var c;let e=F(),{pathname:t,search:n}=v(),{resources:i}=E(A),{resource:s,action:r,matchedRoute:o}=y.useMemo(()=>k(t,i),[i,t]);return Object.entries(e).length===0&&o&&(e=((c=S(o,t))==null?void 0:c.params)||{}),R(()=>{let f=P.parse(n,{ignoreQueryPrefix:!0}),u={...e,...f};return{...s&&{resource:s},...r&&{action:r},...(e==null?void 0:e.id)&&{id:decodeURIComponent(e.id)},pathname:t,params:{...u,current:h(u.current),pageSize:h(u.pageSize),to:u.to?decodeURIComponent(u.to):void 0}}},[t,n,e,s,r])},Link:y.forwardRef(function(t,n){return y.createElement(I,{...t,ref:n})})};import $ from"react";import{useResource as H}from"@refinedev/core";import N from"react";import{Route as j}from"react-router";var B=(e,t)=>{let{name:n,list:i,create:s,show:r,edit:o}=e;if(typeof i=="string"&&t==="list")return i;if(typeof i=="object"&&t==="list")return i.path;if(typeof s=="string"&&t==="create")return s;if(typeof s=="object"&&t==="create")return s.path;if(typeof r=="string"&&t==="show")return r;if(typeof r=="object"&&t==="show")return r.path;if(typeof o=="string"&&t==="edit")return o;if(typeof o=="object"&&t==="edit")return o.path;let a=`/${n}`,c=`${["edit","create","clone","show"].includes(t)?t:""}`,f=`${["edit","show","clone"].includes(t)?":id":""}`;return[a,c,f].filter(Boolean).join("/")},T=e=>e.flatMap(n=>{let i=[];return["list","show","edit","create"].forEach(s=>{let r=n[s];if(typeof r<"u"&&typeof r!="string"){let o=typeof r=="function"?r:r.component,a=B(n,s);i.push({action:s,element:o,path:a}),s==="create"&&i.push({action:"clone",element:o,path:a})}}),i.map(({action:s,element:r,path:o})=>{let a=N.createElement(r,null);return N.createElement(j,{key:`${s}-${o}`,path:o,element:a})})});import{Routes as M}from"react-router";var G=({children:e})=>{let{resources:t}=H(),n=$.useMemo(()=>T(t),[t]);return e?e(n):$.createElement(M,null,n)};import{useResource as Q,useGetToPath as V}from"@refinedev/core";import q from"react";import{Navigate as K}from"react-router";var O=({resource:e,meta:t})=>{let n=V(),{resource:i,resources:s}=Q(e),r=i||s.find(o=>o.list);if(r){let o=n({resource:r,action:"list",meta:t});return o?q.createElement(K,{to:o}):(console.warn("No resource is found to navigate to."),null)}return console.warn("No resource is found to navigate to."),null};import L from"react";import{useTranslate as X,useWarnAboutChange as W}from"@refinedev/core";import l from"react";import{UNSAFE_NavigationContext as z}from"react-router";function J(e,t=!0){let{navigator:n}=l.useContext(z);l.useEffect(()=>{if(!t)return;let i=n.go,s=n.push;return n.push=(...r)=>{e()!==!1&&s(...r)},n.go=(...r)=>{e()!==!1&&i(...r)},()=>{n.push=s,n.go=i}},[n,e,t])}function w(e,t=!0,n){let i=l.useCallback(r=>(r.preventDefault(),r.returnValue=e,r.returnValue),[e]);l.useEffect(()=>(t&&window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}),[i,t]);let s=l.useCallback(()=>{let r=window.confirm(e);return r&&n&&n(),r},[e]);J(s,t)}import{useLocation as Y}from"react-router";var _=({translationKey:e="warnWhenUnsavedChanges",message:t="Are you sure you want to leave? You have unsaved changes."})=>{let n=X(),{pathname:i}=Y(),{warnWhen:s,setWarnWhen:r}=W();L.useEffect(()=>()=>r==null?void 0:r(!1),[i]);let o=L.useMemo(()=>n(e,t),[e,t,n]);return w(o,s,()=>{r==null||r(!1)}),null};import Z from"react";import{Navigate as ee,useLocation as te}from"react-router";var oe=({to:e})=>{let{pathname:t,search:n}=te(),i=`${t}${n}`,s=i.length>1?`?to=${encodeURIComponent(i)}`:"";return Z.createElement(ee,{to:`${e}${s}`})};import{useParsed as re,useTranslate as ne,generateDefaultDocumentTitle as se,useUserFriendlyName as ie}from"@refinedev/core";import U,{useLayoutEffect as ae}from"react";import{useLocation as ue}from"react-router";function ce({handler:e}){var d;let t=ue(),{action:n,id:i,params:s,pathname:r,resource:o}=re(),a=ne(),c=ie(),f=(o==null?void 0:o.identifier)??(o==null?void 0:o.name),p=(o==null?void 0:o.label)??((d=o==null?void 0:o.meta)==null?void 0:d.label)??c(f,n==="list"?"plural":"singular"),m=a(`${o==null?void 0:o.name}.${o==null?void 0:o.name}`,p);return ae(()=>{let g=se(a,o,n,`${i}`,p);e?document.title=e({action:n,resource:{...o??{},label:m,meta:{...o==null?void 0:o.meta,label:m}},params:s,pathname:r,autoGeneratedTitle:g}):document.title=g},[t]),U.createElement(U.Fragment,null)}import{useTranslate as fe}from"@refinedev/core";import{useEffect as pe}from"react";var me=e=>{let t=fe();return pe(()=>{e&&(typeof e=="string"?document.title=t(e):document.title=t(e.i18nKey))},[e]),n=>{typeof n=="string"?document.title=t(n):document.title=t(n.i18nKey)}};export{oe as CatchAllNavigate,ce as DocumentTitleHandler,O as NavigateToResource,G as RefineRoutes,_ as UnsavedChangesNotifier,D as default,x as stringifyConfig,me as useDocumentTitle};
//# sourceMappingURL=index.mjs.map